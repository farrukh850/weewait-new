document.addEventListener("DOMContentLoaded",function(){T(),M(),H(),F()});function T(){const e=document.querySelectorAll(".popup-button");e.length>0&&e.forEach(s=>{s.addEventListener("click",function(a){a.preventDefault(),W("filter-popup")})}),document.querySelectorAll(".popup-close, .popup-overlay").forEach(s=>{s.addEventListener("click",function(a){if(a.target===this||a.target.closest(".popup-close")){const m=a.target.closest(".popup-overlay").id;A(m)}})});const o=document.querySelector(".apply-now-button");o&&o.addEventListener("click",function(s){s.preventDefault();const a=s.target.closest(".popup-overlay").id;A(a),D(),window.scrollTo({top:0,behavior:"smooth"})})}function M(){const e=document.querySelectorAll(".apply-now-button"),t=document.querySelector(".toast-block");if(e.length>0&&t){let c=function(r){m&&clearTimeout(m),r.style.display="block",r.style.opacity="0",r.style.transition="all 0.3s ease",r.offsetWidth,r.style.opacity="1",m=setTimeout(()=>{f(r)},5e3);const u=r.querySelector("em");u&&(u.style.transition="width 5s linear",u.style.width="0")},f=function(r){r.style.opacity="0";const u=r.querySelector("em");u&&(u.style.transition="none",u.style.width="50%")};var o=c,s=f;e.forEach(r=>{r.addEventListener("click",function(u){u.preventDefault(),c(t)})});const a=t.querySelector("button");a&&a.addEventListener("click",function(){f(t)});let m}}function W(e){const t=document.getElementById(e);t&&(t.classList.add("active"),document.body.style.overflow="hidden")}function A(e){const t=document.getElementById(e);t&&(t.classList.remove("active"),document.body.style.overflow="")}let q;function D(){const e=document.querySelector(".toast-block");if(!e)return;q&&clearTimeout(q),e.classList.remove("hidden"),e.style.display="block",e.style.opacity="1";const t=e.querySelector("em");t&&(t.style.transition="none",t.style.width="100%",t.offsetWidth,t.style.transition="width 5s linear",t.style.width="0"),q=setTimeout(()=>{$()},5e3)}function $(){const e=document.querySelector(".toast-block");e&&(e.style.opacity="0",setTimeout(()=>{e.style.display="none",e.classList.add("hidden");const t=e.querySelector("em");t&&(t.style.transition="none",t.style.width="100%")},300))}function H(){w("filter-mobile-btn","filter-popup-mobile"),w("sort-mobile-btn","sort-popup-mobile"),w("search-mobile-btn","search-popup-mobile"),I()}function w(e,t){const o=document.getElementById(e),s=document.getElementById(t);if(!o||!s)return;o.addEventListener("click",function(c){c.preventDefault(),c.stopPropagation(),C(s)}),o.addEventListener("touchstart",function(c){c.preventDefault(),C(s)},{passive:!1}),s.querySelectorAll(".popup-close").forEach(c=>{c.addEventListener("click",function(f){f.preventDefault(),f.stopPropagation(),L(s)}),c.addEventListener("touchstart",function(f){f.preventDefault(),L(s)},{passive:!1})}),s.addEventListener("click",function(c){c.target===s&&L(s)}),s.querySelectorAll(".apply-now-button").forEach(c=>{c.addEventListener("click",function(f){f.preventDefault(),L(s),D()})})}function C(e){e.classList.contains("active")?L(e):X(e)}function X(e){document.querySelectorAll(".popup-overlay.active").forEach(t=>{t!==e&&L(t)}),e.classList.add("active"),document.body.style.overflow="hidden",e.offsetWidth}function L(e){e.classList.remove("active"),document.body.style.overflow=""}function I(){document.querySelectorAll(".overflow-y-auto").forEach(t=>{let o=t.querySelector("#scroll-fade");o||(o=document.createElement("div"),o.id="scroll-fade",t.appendChild(o)),x(t,o),t.addEventListener("scroll",function(){x(t,o)}),window.addEventListener("resize",function(){x(t,o)})})}function x(e,t){e.scrollHeight-e.scrollTop<=e.clientHeight+5?t.style.opacity="0":t.style.opacity="1",t.style.bottom="0",t.style.position="absolute"}function F(){const e=document.querySelectorAll(".range-slider-min, .range-slider-max");if(e.length===0)return;let t=!1,o=null,s,a;const m=["#FFA9CF"];document.querySelectorAll(".range-slider-min").forEach(n=>{const i=n.closest("span"),p=i.querySelector(".range-slider-max"),l=i.querySelector(".range-slider-fill");if(l){const d=n.offsetLeft+n.offsetWidth/2,y=p.offsetLeft;l.style.left=`${d}px`,l.style.width=`${y-d}px`,l.style.backgroundColor=m[0]}}),document.querySelectorAll(".filter-button").forEach(n=>{const i=n.querySelector(".filter-dropdown");i&&i.addEventListener("click",function(p){p.stopPropagation()})}),e.forEach(n=>{n.addEventListener("mousedown",r),n.addEventListener("touchstart",r,{passive:!1})}),document.addEventListener("mousemove",u),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("mouseup",B),document.addEventListener("touchend",B);function r(n){n.preventDefault(),n.stopPropagation(),t=!0,o=this,o.closest("span").getBoundingClientRect(),n.type==="touchstart"?s=n.touches[0].clientX:s=n.clientX,a=o.offsetLeft}function u(n){if(!t||!o)return;n.preventDefault();let i;n.type==="touchmove"?i=n.touches[0].clientX:i=n.clientX;let p=i-s,l=a+p;const d=o.closest("span");d.getBoundingClientRect();const y=d.querySelector(".range-slider-min"),v=d.querySelector(".range-slider-max"),g=d.querySelector(".range-slider-fill"),E=0,b=d.offsetWidth-o.offsetWidth;if(l=Math.max(E,Math.min(l,b)),o.classList.contains("range-slider-min")){const h=v.offsetLeft;l=Math.min(l,h-10)}else{const h=y.offsetLeft;l=Math.max(l,h+10)}if(o.style.left=`${l}px`,g){const h=y.offsetLeft+y.offsetWidth/2,S=v.offsetLeft+v.offsetWidth/2;g.style.left=`${h}px`,g.style.width=`${S-h}px`}P(d,y,v)}function B(){t=!1,o=null}function P(n,i,p){const l=n.closest(".filter-dropdown, .flex.flex-col.gap-2");if(!l)return;const d=l.querySelector(".min-value"),y=l.querySelector(".max-value");if(!d||!y)return;const v=n.offsetWidth-i.offsetWidth,g=i.offsetLeft/v*100,E=p.offsetLeft/v*100,b=180,h=Math.round(20+g/100*b),S=Math.round(20+E/100*b);d.textContent=`$ ${h}`,y.textContent=`$ ${S}`;const k=n.querySelector(".range-slider-fill");k&&(k.style.width=`${E-g}%`)}e.forEach(n=>{if(n.classList.contains("range-slider-min")){const i=n.closest("span"),p=i.querySelector(".range-slider-min"),l=i.querySelector(".range-slider-max");P(i,p,l)}})}
